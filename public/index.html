<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fridge-Feeder</title>
  <link rel="stylesheet" type="text/css" href="stylesheets/style.css">
</head>
<body>

  <table>
    <caption>What's Inside My Fridge</caption>
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Number</th>
        <th scope="col">Expire Date</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody id="tbody">
    </tbody>
  </table>

  <table class = "addItemForm">
    <caption>I Bought</caption>
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Number</th>
        <th scope="col">Expire Date</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><input type="text"></td>
        <td><input type="number"></td>
        <td><input id="dateInput" type="date" id="start" name="trip-start"
          value="2020-04-27"
          min="2020-04-27" max="2040-12-31"></td>
        <td><button>Add</button></td>
      </tr>
    </tbody>
  </table>

</body>
<script>
  let item1 = document.getElementById('item1');
  let tbody = document.getElementById('tbody');
  let dateInput = document.getElementById('dateInput')
//   async function itemLength() { await fetch('http://localhost:4000/api/fridge', {
//     method: 'GET'
//   }).then(res => res.json()).then(json => {
//     return json.length
//   })
// }
console.log(dateInput.value)
// console.log(itemLength())

  let addNewItem = (num) => {
    fetch(`http://localhost:4000/api/fridge/${num}`, {
    method: 'GET'
  }).then(res => res.json()).then(json => {
    console.log(json)
    let tr1 = document.createElement('TR');
    let td1_1 = document.createElement('TD');
    td1_1.appendChild(document.createTextNode(json.name));
    let td1_2 = document.createElement('TD');
    td1_2.appendChild(document.createTextNode(json.number));
    let td1_3 = document.createElement('TD');
    td1_3.appendChild(document.createTextNode(json.expire_date));
    let td1_4 = document.createElement('TD');
    let bt = document.createElement('BUTTON');
    bt.innerText = 'Ate It';
    td1_4.appendChild(bt);
    // td1_4.appendChild(document.createTextNode(json.expire_date));
    tr1.appendChild(td1_1);
    tr1.appendChild(td1_2);
    tr1.appendChild(td1_3);
    tr1.appendChild(td1_4);

    tbody.appendChild(tr1);
  })
  };

  for(let i = 1; i <= 4; i++){
    addNewItem(i)
  }
  // while(itemLength >= 0){
  //   addNewItem(itemLength)
  //   itemLength--;
  // }
  // fetch('http://localhost:4000/api/fridge', {
  //   method: 'GET'
  // }).then(res => res.json()).then(json => {
  //   console.log(json)
  //   let div = document.createElement('div')
  //   div.innerText = json.map(item => item.name);
  //   document.body.appendChild(div)
  // })

  const query = {
        "name": "kimuchi",
        "number": 1,
        "expire_date": "2020-11-13"
  }

  // fetch('http://localhost:4000/api/fridge', {
  //   method: 'POST',
  //   headers: { 'Content-Type': 'application/json' },
  //   body: JSON.stringify(query)
  // }).then(res => res.json()).then(json => {
  //   console.log(json)
  //   let div = document.createElement('div')
  //   div.innerText = json.name;
  //   document.body.appendChild(div)
  // })

  // console.log(data)
  // let parsedData = JSON.parse(data)
  // console.log('after', parsedData)
  // document.getElementById('target').innerHTML = parsedData['id']
  // document.body.appendChild(data.id);
</script>
</html>